@inherits RBase
@page "/采购/申请/查看/{RecordId:int}"

<KRow>
    <KCol MD="6">
        <PageTemplateItem Title="采购申请 - 新增">
            <KFormGroupContainer LabelCol="3" LabelAlign="LabelAlign.Right" InputReadonly="true">
                <KFormGroup Label="@nameof(main.单号)">
                    <KInputText @bind-Value="main.单号" Placeholder="自动生成 ..."></KInputText>
                </KFormGroup>
                <KFormGroup Label="销售订单">
                    <KInputText @bind-Value="main.往来单号"></KInputText>
                </KFormGroup>
                <KFormGroup Label="@nameof(main.日期)">
                    <KInputDatePicker @bind-Value="main.日期" Format="yyyy-MM-dd" EnablePicker="false"></KInputDatePicker>
                </KFormGroup>
                <KFormGroup Label="@nameof(main.交期)">
                    <KInputDatePicker @bind-Value="main.交期" Format="yyyy-MM-dd" EnablePicker="false"></KInputDatePicker>
                </KFormGroup>
                <KFormGroup Label="@nameof(main.备注)">
                    <KInputText @bind-Value="main.备注"></KInputText>
                </KFormGroup>
            </KFormGroupContainer>
        </PageTemplateItem>
    </KCol>
</KRow>
<KRow>
    <KCol>
        <PageTemplateItemForR Title="明细" OnBack="@(e=>Navigation.NavigateTo(routeA))" OnEdit="@(e=>Navigation.NavigateTo($"{routeU}/{RecordId}"))">
            <KTable2 DataSource="detailsTableDataSource" IsResponsive="true" IsBordered=" true" IsTextNoWrap="true" @ref="detailsTable"
                     CheckBoxHeader="true" IsSingleSelect="true" IsClickToSelect="true">
                <KTable2Columns>
                    <KTable2Column Text="#" Context="row">@(detailsTableDataSource.IndexOf(row as dto采购申请D) + 1)</KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.品号))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.品名))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.型号))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.规格))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.个数))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.数量))"></KTable2Column>
                    <KTable2Column Field="@(nameof(dto采购申请D.单位))"></KTable2Column>
                    @*<KTable2Column Field="@(nameof(dto采购申请D.单价))"></KTable2Column>*@
                    @*<KTable2Column Field="@(nameof(dto采购申请D.金额))"></KTable2Column>*@
                    <KTable2Column Field="@(nameof(dto采购申请D.备注))"></KTable2Column>
                </KTable2Columns>
            </KTable2>
        </PageTemplateItemForR>
    </KCol>
</KRow>
